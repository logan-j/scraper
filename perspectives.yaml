---
name: 'link 8'

classIDs:
  floorPlan: 'floorPlan'
  bed: 'bed'
  bath: 'bath'
  unit: 'unit'
  sqft: 'sqft'
  price: 'price'
  available: 'available'
  button: 'navigate'

unit:
  tag: '//tbody/tr'
  subtag: 'td[@class]'
  attribute: 'class'
  explicit: True
  navigate: True
  dryscrape: False
  quan: !!int 9

avail:
  now: 'now'

timing: ''

nav:
  flag: 'request'
  location: '//p/span'
  links: '//a'
  redirect_on: 'all available'

s_nav:
  - 'floorPlan'

pricer:
  regex: '[^\d]+'
  r_identifier: 'rent'

---
name: 'link 55'

classIDs:
  addr_or_apt: 'unit'
  addr_or_apt address: 'unit'
  unit_rent: 'price'
  show_available_date: 'available'

avail:
  now: 'now'

unit:
  tag: '//div[@class="floor_plan"]'
  subtag: './/*[@class]'
  attribute: 'class'
  explicit: True
  navigate: False
  dryscrape: False
  quan: !!int 8

pricer:
  regex: '([^\d]+|(?<=\.)\d+)+'

timing: 'pre'

pre_build:
  f_root: 'p[@class="floor_plan_size"]'
  floorPlan: ''
  replace:
    -
      studio: '0 1'
    -
      '[^\d\s.]': ' '
  '[^\d.]+':
    bed: !!int 0
    bath: !!int 1
    sqft: !!int 2

---

name: 'pangea (link 96)'

reset:
  - 'info'
  - 'bath'
  - 'sqft'
  - 'price'
  - 'unit'

classIDs:
  - 'info'
  - 'bath'
  - 'sqft'
  - 'price'
  - 'unit'

avail:
  now: 'now'

pricer:
  regex: '[^\d]+'

unit:
  tag: '//div[@class="panel panel-default"]'
  subtag: './/tr/td'
  explicit: False
  navigate: False
  dryscrape: False
  quan: !!int 7

timing: 'prepost'

pre_build:
  b_root: ''
  bed:
    find: './/h3'
    remove: '\(.+\)'


post_build:
  available: '&now'
  floorPlan:
    - bed
    - bath
  bed:
    '0': 'Studio'
    ' ': '[^\d]+'
  bath: '[^\d]+'

---

name: 'avalonbay'

unit:
  navigate: True
  dryscrape: False


pre_build:
  floorPlanType: 'bed'
  floorPlanBathType: 'bath'
  floorPlanName: 'floorPlan'

classIDs:
  effectiveRent: 'price'
  apartmentNumber: 'unit'
  apartmentSize: 'sqft'
  availableDate: 'available'

nav:
  links: '//script[@type="text/javascript"]'
  redirect_on: "communitycode"

json:
  format: "http://api.avalonbay.com/json/reply/ApartmentSearch?communityCode=%s"
  split: '\"'
  index: !!int 1

---

name: 'link 53'

redirect: ''

reset:
  - 'lease'
  - 'available'
  - 'price'
  - 'sqft'
  - 'unit'
  - 'building'

classIDs:
  - 'lease'
  - 'available'
  - 'price'
  - 'sqft'
  - 'unit'
  - 'building'

pre_build:
  f_root: '//div[@class="fpContainer"]'
  floorPlan: ''
  '[^\d.]+':
    bed: !!int 0
    bath: !!int 1
  replace:
    -
      studio: '0'

post_build:
  

unit:
  navigate: False
  dryscrape: False
  explicit: False
  tag: '//tbody/tr[@class="data"]'
  subtag: './/td[@class]'

avail:
  now: 'now'

pricer:
  regex: '[^\d]+'


---

name: 'Link 97 (mac)'

base_url: 'http://www.macapartments.com/search?bedroomsPlus=--&city=%s&moveInDate=%s&bathsPlus=--&term=-&minRent=--&maxRent=--&buildingOrStreet=#/?page=300'

fuzzer: 'a'

avail:
  now: 'now'

unit:
  navigate: False
  dryscrape: False

pricer:
  regex: '([^\d]+|(?<=\.)\d+)+'


---

name: '***(WORK IN PROGRESS) Aimco'

classIDs:
  bedroomsWithFloor: 'bed'
  bathroomsWithFloor: 'bath'
  squareFeetWithFloor: 'sqft'
  available: 'available'
  thickbox: 'price'

timing: 'pre'

pre_build:
  f_root: 'preceding-sibling::div[@class="FPHeader "]::descendent::*/text()'
  '\(':
    unit: !!int 0
    floorPlan: !!int 1

avail:
  now: 'now'

unit:
  navigate: True
  dryscrape: True
  explicit: True
  tag: '//div[@class="viewInfo"]'
  subtag: './/*[@class]'
  attribute: 'class'
  quan: !!int 6

pricer:
  regex: ''

...
